{"ast":null,"code":"var _jsxFileName = \"/Users/annamatic/Desktop/webtest/src/content/blog/components/All.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport ArticleSkeleton from './Skeleton';\nimport { Toolbar, AppBar, InputBase, Button, Typography } from '@material-ui/core';\nimport { Search } from '@material-ui/icons';\nimport * as link from '../../../utilities/link-config';\nimport Pagination from '@material-ui/lab/Pagination';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.primary.light\n  },\n  searchBar: {\n    backgroundColor: theme.palette.primary.light,\n    [theme.breakpoints.up('xs')]: {\n      padding: theme.spacing(0, 4),\n      top: 54,\n      marginBottom: theme.spacing(2)\n    },\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(0, 2)\n    },\n    [theme.breakpoints.up('md')]: {\n      top: 64\n    }\n  },\n  toolbar: {},\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: '50%',\n    [theme.breakpoints.up('sm')]: {\n      width: 'auto'\n    }\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    color: theme.palette.common.white,\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  inputRoot: {\n    color: theme.palette.common.white\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('md')]: {\n      width: '40ch'\n    }\n  },\n  skeletonWrapper: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    margin: '0 auto',\n    minHeight: '40vh',\n    padding: theme.spacing(4),\n    [theme.breakpoints.up('sm')]: {\n      paddingTop: 0\n    }\n  },\n  pagination: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    maxWidth: '100%',\n    padding: theme.spacing(1, 0)\n  },\n  searchResults: {\n    padding: theme.spacing(2, 4),\n    color: theme.palette.common.white\n  },\n  bold: {\n    fontWeight: 900\n  }\n}));\nexport default function AllArticles() {\n  const classes = useStyles();\n  const [articles, setArticles] = useState([]);\n  const [count, setCount] = useState(0);\n  const [search, setSearched] = useState(false);\n  const [numberOfResults, setNumberOfResults] = useState(count);\n  const [loading, setLoading] = useState(true);\n  const [amountShown, setAmountShown] = useState(12);\n  const [limit, setLimit] = useState({\n    start: 0,\n    limit: amountShown\n  });\n\n  const searchForTag = tag => {};\n\n  const searchInAllArticles = chars => {\n    axios.get(`${link.STRAPI_BASE}/articles?_sort=created_at:DESC&title_contains=${chars}&_start=${limit.start}&_limit=${limit.limit}`).then(response => {\n      console.log(response.data);\n      setArticles(response.data);\n      setSearched(true);\n      countFoundSearchResults(chars);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const countFoundSearchResults = chars => {\n    axios.get(`${link.STRAPI_BASE}/articles/count?title_contains=${chars}`).then(response => {\n      console.log(response.data);\n      let count = response.data / amountShown;\n      setNumberOfResults(response.data);\n      setCount(count);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const fetchAllArticles = () => {\n    axios.get(`${link.STRAPI_BASE}/articles?_sort=created_at:DESC&_start=${limit.start}&_limit=${limit.limit}`).then(response => {\n      console.log(response.data);\n      setSearched(false);\n      setArticles(response.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const countAllArticles = () => {\n    axios.get(`${link.STRAPI_BASE}/articles/count`).then(response => {\n      let count = response.data / amountShown;\n      setNumberOfResults(response.data);\n      setCount(count);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const pageChanged = (event, value) => {\n    let updatedArticles = (value - 1) * amountShown;\n    setLimit({\n      start: updatedArticles,\n      limit: updatedArticles + amountShown\n    });\n  };\n\n  const handleInputChanged = event => {\n    console.log(event.target.value);\n    console.log(event.target.value);\n    let input = event.target.value;\n\n    if (input === \"\") {\n      fetchAllArticles();\n    } else {\n      searchInAllArticles(event.target.value);\n    }\n  };\n\n  useEffect(() => {\n    fetchAllArticles();\n  }, [limit]);\n  useEffect(() => {\n    if (loading && articles.length > 0) {\n      setLoading(false);\n    }\n  }, [articles]);\n  useEffect(() => {\n    fetchAllArticles();\n    countAllArticles();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    className: classes.searchBar,\n    elevation: 0,\n    position: \"sticky\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    className: classes.toolbar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.search,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.searchIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(InputBase, {\n    onChange: handleInputChanged,\n    placeholder: \"Search for a product, release, article...\",\n    classes: {\n      root: classes.inputRoot,\n      input: classes.inputInput\n    },\n    inputProps: {\n      'aria-label': 'search'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.searchResults,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }, search ? /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 33\n    }\n  }, \"Found \", /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.bold,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 43\n    }\n  }, numberOfResults), \" \", numberOfResults === 1 ? \"result\" : \"results\") : null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.skeletonWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }, loading ? /*#__PURE__*/React.createElement(ArticleSkeleton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 27\n    }\n  }) : /*#__PURE__*/React.createElement(ArticleSkeleton, {\n    tagClicked: searchForTag,\n    articles: articles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.pagination,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    showFirstButton: true,\n    showLastButton: true,\n    onChange: pageChanged,\n    count: count,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/annamatic/Desktop/webtest/src/content/blog/components/All.js"],"names":["React","useState","useEffect","axios","fade","makeStyles","ArticleSkeleton","Toolbar","AppBar","InputBase","Button","Typography","Search","link","Pagination","useStyles","theme","root","backgroundColor","palette","primary","light","searchBar","breakpoints","up","padding","spacing","top","marginBottom","toolbar","search","position","borderRadius","shape","common","white","marginRight","marginLeft","width","searchIcon","height","color","pointerEvents","display","alignItems","justifyContent","inputRoot","inputInput","paddingLeft","transition","transitions","create","skeletonWrapper","flexDirection","margin","minHeight","paddingTop","pagination","maxWidth","searchResults","bold","fontWeight","AllArticles","classes","articles","setArticles","count","setCount","setSearched","numberOfResults","setNumberOfResults","loading","setLoading","amountShown","setAmountShown","limit","setLimit","start","searchForTag","tag","searchInAllArticles","chars","get","STRAPI_BASE","then","response","console","log","data","countFoundSearchResults","catch","error","fetchAllArticles","countAllArticles","pageChanged","event","value","updatedArticles","handleInputChanged","target","input","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport ArticleSkeleton from './Skeleton';\nimport { Toolbar, AppBar, InputBase, Button, Typography } from '@material-ui/core';\nimport { Search } from '@material-ui/icons';\nimport * as link from '../../../utilities/link-config';\nimport Pagination from '@material-ui/lab/Pagination';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        backgroundColor: theme.palette.primary.light,\n    },\n    searchBar: {\n        backgroundColor: theme.palette.primary.light,\n        [theme.breakpoints.up('xs')]: {\n            padding: theme.spacing(0, 4),\n            top: 54,\n            marginBottom: theme.spacing(2)\n        },\n        [theme.breakpoints.up('md')]: {\n            padding: theme.spacing(0, 2)\n        },\n        [theme.breakpoints.up('md')]: {\n            top: 64,\n        },\n    },\n    toolbar: {\n    },\n    search: {\n        position: 'relative',\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: fade(theme.palette.common.white, 0.15),\n        '&:hover': {\n            backgroundColor: fade(theme.palette.common.white, 0.25),\n        },\n        marginRight: theme.spacing(2),\n        marginLeft: 0,\n        width: '50%',\n        [theme.breakpoints.up('sm')]: {\n            width: 'auto',\n        },\n    },\n    searchIcon: {\n        padding: theme.spacing(0, 2),\n        height: '100%',\n        color: theme.palette.common.white,\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    inputRoot: {\n        color: theme.palette.common.white\n    },\n    inputInput: {\n        padding: theme.spacing(1, 1, 1, 0),\n        paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n        transition: theme.transitions.create('width'),\n        width: '100%',\n        [theme.breakpoints.up('md')]: {\n            width: '40ch',\n        },\n    },\n    skeletonWrapper: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        margin: '0 auto',\n        minHeight: '40vh',\n        padding: theme.spacing(4),\n        [theme.breakpoints.up('sm')]: {\n            paddingTop: 0\n        }\n    },\n    pagination: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        maxWidth: '100%',\n        padding: theme.spacing(1, 0)\n    },\n    searchResults: {\n        padding: theme.spacing(2, 4),\n        color: theme.palette.common.white\n    },\n    bold: {\n        fontWeight: 900\n    }\n}))\n\nexport default function AllArticles() {\n    const classes = useStyles();\n    const [articles, setArticles] = useState([])\n    const [count, setCount] = useState(0)\n    const [search, setSearched] = useState(false)\n    const [numberOfResults, setNumberOfResults] = useState(count)\n    const [loading, setLoading] = useState(true)\n    const [amountShown, setAmountShown] = useState(12)\n    const [limit, setLimit] = useState({\n        start: 0,\n        limit: amountShown\n    })\n\n    const searchForTag = (tag) => {\n\n    }\n\n    const searchInAllArticles = (chars) => {\n        axios.get(`${link.STRAPI_BASE}/articles?_sort=created_at:DESC&title_contains=${chars}&_start=${limit.start}&_limit=${limit.limit}`)\n            .then((response) => {\n                console.log(response.data)\n                setArticles(response.data);\n                setSearched(true);\n                countFoundSearchResults(chars);\n            })\n            .catch((error) => {\n                console.log(error)\n            })\n    }\n\n    const countFoundSearchResults = (chars) => {\n        axios.get(`${link.STRAPI_BASE}/articles/count?title_contains=${chars}`)\n            .then((response) => {\n                console.log(response.data)\n                let count = (response.data) / amountShown;\n                setNumberOfResults(response.data);\n                setCount(count);\n            })\n            .catch((error) => {\n                console.log(error)\n            })\n    }\n\n    const fetchAllArticles = () => {\n        axios.get(`${link.STRAPI_BASE}/articles?_sort=created_at:DESC&_start=${limit.start}&_limit=${limit.limit}`)\n            .then((response) => {\n                console.log(response.data)\n                setSearched(false);\n                setArticles(response.data);\n            })\n            .catch((error) => {\n                console.log(error)\n            })\n    }\n\n    const countAllArticles = () => {\n        axios.get(`${link.STRAPI_BASE}/articles/count`)\n            .then((response) => {\n                let count = (response.data) / amountShown;\n                setNumberOfResults(response.data);\n                setCount(count);\n            })\n            .catch((error) => {\n                console.log(error)\n            })\n    }\n\n    const pageChanged = (event, value) => {\n        let updatedArticles = (value - 1) * amountShown\n        setLimit({\n            start: updatedArticles,\n            limit: updatedArticles + amountShown\n        })\n    }\n\n    const handleInputChanged = (event) => {\n        console.log(event.target.value)\n        console.log(event.target.value)\n        let input = event.target.value\n        if (input === \"\") { fetchAllArticles(); }\n        else {\n            searchInAllArticles(event.target.value)\n        }\n    }\n\n    useEffect(() => {\n        fetchAllArticles();\n    }, [limit])\n\n    useEffect(() => {\n        if (loading && articles.length > 0) {\n            setLoading(false);\n        }\n    }, [articles])\n\n    useEffect(() => {\n        fetchAllArticles();\n        countAllArticles();\n    }, [])\n\n    return (\n        <div className={classes.root}>\n            <AppBar className={classes.searchBar} elevation={0} position=\"sticky\">\n                <Toolbar className={classes.toolbar}>\n                    <div className={classes.search}>\n                        <div className={classes.searchIcon}>\n                            <Search />\n                        </div>\n                        <InputBase\n                            onChange={handleInputChanged}\n                            placeholder=\"Search for a product, release, article...\"\n                            classes={{\n                                root: classes.inputRoot,\n                                input: classes.inputInput,\n                            }}\n                            inputProps={{ 'aria-label': 'search' }}\n                        />\n                    </div>\n                    <div className={classes.searchResults}>\n                        {\n                            search\n                                ?\n                                <Typography variant=\"subtitle1\">\n                                    Found <span className={classes.bold}>{numberOfResults}</span> { numberOfResults === 1 ? \"result\" : \"results\"}\n                                </Typography>\n                                : null\n                        }\n                    </div>\n                </Toolbar>\n            </AppBar>\n            <div className={classes.skeletonWrapper}>\n                {\n                    loading\n                        ? <ArticleSkeleton />\n                        :\n                        <ArticleSkeleton\n                            tagClicked={searchForTag}\n                            articles={articles} />\n                }\n            </div>\n            <div className={classes.pagination}>\n                <Pagination showFirstButton showLastButton onChange={pageChanged} count={count} />\n            </div>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}